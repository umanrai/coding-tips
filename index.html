<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Coding Tips</title>
    <meta name="description" content="Coding Tips">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
        integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
        crossorigin="anonymous" />
</head>

<body>
    <div class="container">
        <div class="back">
            <i class="fa fa-arrow-left backBtn">
                <span class="backSetting">Back setting</span>
            </i>
        </div>

        <div class="select">
            <div class="setting" id="mySetting">
                <i class="fa fa-cogs">
                    <span class="settingtext">Setting</span>
                </i>
            </div>
            <div class="tooltip" id="myTooltip">
                <i class="fa fa-clipboard" style="float: right;">
                    <span class="tooltiptext">Copy to clipboard</span>
                </i>
            </div>

            <h1>

                <i class="fas fa-quote-left"></i>
                <span class="quote" id="quote"></span>
                <i class="fas fa-quote-right"></i>
            </h1>
            <p class="author" id="author"></p>
            <hr />
        </div>


        <div class="buttons">
            <div>
                <a class="btn twitter" id="tweet" title="Share to twitter"
                    href="https://twitter.com/intent/tweet?text=Greetings" data-size="large" target="_blank"
                    rel="noopener noreferrer"><i class="fab fa-twitter"></i></a>
                <a class="btn facebook" id="facebook" title="Share to facebook"
                    href="https://www.facebook.com/sharer/sharer.php?quote=Greetings" data-size="large" target="_blank"
                    rel="noopener noreferrer"><i class="fab fa-facebook"></i></a>
            </div>
            <button class="next" id="next-quota">Next quote</button>
        </div>
        <div class="tip"></div>
    </div>
    <script src="./assets/js/script.js" async defer></script>

    <script>
        // const directory = 'assets/data/tips/javascript.json';
        const directory = 'assets/data/categories.json';

        // fetchJSONData('assets/data/tips/php.json')
        //     .then((data)=> console.log(data))
        //     .catch(error => console.error('Error getting php data:', error))

        // creating setting onclick event
        document.getElementById('mySetting').addEventListener('click', function () {
            document.querySelector(".select").style.display = 'none'
            document.querySelector(".buttons").style.display = 'none'
            document.querySelector(".tip").style.display = 'block'
            document.querySelector(".backBtn").style.display = 'block'

            // If category buttons are empty create categories buttons else show already created buttons
            if (document.querySelectorAll('.btn-language').length < 1) {
                createCategoryButtons()
            } else {
                document.querySelector(".tip").style.display = 'block'
            }
        })

        // <i class="fa fa-check"></i>
        function createCategoryButtons() {
            fetchJSONData('assets/data/categories.json')
                .then(categories => {
                    // categories['categories'].forEach( uman => console.log(uman) );
                    categories.categories.forEach(
                        function (categoryName) {
                            const btn = document.createElement("button");
                            btn.innerHTML = categoryName;
                            btn.classList.add("btn-language");
                            btn.style.cursor = "pointer"
                            // btn.style.overflowY = "scroll"

                            // Event Listener
                            btn.addEventListener('click', function (e) {                            
                                if (btn.querySelectorAll('.fa').length === 0) {
                                    const iTag = document.createElement("i");
                                    iTag.classList.add("fa");
                                    iTag.classList.add("fa-check");

                                    btn.appendChild(iTag)

                                    // e.target.innerHTML = e.target.innerHTML + "<i class='fa fa-check'></i>"
                                } else {
                                    btn.querySelector('.fa').remove()
                                }
                            })

                            // Append to body:
                            document.querySelector(".tip").appendChild(btn);
                        }
                    );
                })
                .catch(error => console.error('Error getting categories:', error))
        }

        document.querySelector(".backBtn").addEventListener('click', function () {
            document.querySelector(".select").style.display = 'block'
            document.querySelector(".buttons").style.display = 'flex'
            document.querySelector(".tip").style.display = 'none'
            document.querySelector(".backBtn").style.display = 'none'
        })

        async function fetchJSONData(jsonFileFullPath) {
            try {
                const response = await fetch(jsonFileFullPath);
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching JSON files:', error);
                return [];
            }
        }
    </script>

</body>

</html>